# Concord Cognitive Engine - Environment Configuration
# Copy this file to .env and update values

# ============================================
# DOMAIN CONFIGURATION
# ============================================

# Your domain name (without https://)
DOMAIN=yourdomain.com

# Public API URL (used by frontend to connect to backend)
# For production: https://yourdomain.com
# For local dev: http://localhost:5050
NEXT_PUBLIC_API_URL=https://yourdomain.com

# Allowed origins for CORS (comma-separated if multiple)
ALLOWED_ORIGINS=https://yourdomain.com

# ============================================
# SERVER CONFIGURATION
# ============================================

# Backend port
PORT=5050

# Node environment
NODE_ENV=production

# Data directory for persistent storage
DATA_DIR=/data

# ============================================
# LLM CONFIGURATION (Optional)
# ============================================

# Ollama host (if using local Ollama)
# For Docker: http://ollama:11434
# For external: http://your-ollama-server:11434
OLLAMA_HOST=http://ollama:11434

# Default model for Ollama
OLLAMA_MODEL=llama3.2

# Enable LLM features
LLM_ENABLED=true

# ============================================
# OPTIONAL: EXTERNAL SERVICES
# ============================================

# If using external APIs (optional, not required for local-only mode)
# ANTHROPIC_API_KEY=your-key-here
# OPENAI_API_KEY=your-key-here

# ============================================
# SECURITY (CRITICAL - Must configure for production)
# ============================================

# REQUIRED: JWT secret for token signing (generate with: openssl rand -hex 64)
# WARNING: If not set, tokens will be invalidated on server restart!
JWT_SECRET=

# REQUIRED: Admin password for initial admin account (minimum 12 characters)
# WARNING: Server will not create admin account without this!
ADMIN_PASSWORD=

# Enable authentication (defaults to true in production)
AUTH_ENABLED=true

# Session secret (generate with: openssl rand -hex 32)
SESSION_SECRET=

# API key for protected endpoints (optional)
# API_KEY=your-api-key

# PostgreSQL SSL settings (for remote databases)
# POSTGRES_SSL=true
# POSTGRES_SSL_REJECT_UNAUTHORIZED=true  # Set to false only for self-signed certs

# ============================================
# PERFORMANCE
# ============================================

# Max DTUs in memory
MAX_DTUS_IN_MEMORY=10000

# Queue processing batch size
BATCH_SIZE=100

# ============================================
# MULTIMODAL / VISION (Optional)
# ============================================

# Vision analysis uses Ollama llava locally, or OpenAI GPT-4 Vision if OPENAI_API_KEY is set
# OLLAMA_VISION_MODEL=llava

# Image generation uses local Stable Diffusion, or OpenAI DALL-E if OPENAI_API_KEY is set
# SD_URL=http://localhost:7860/sdapi/v1/txt2img
# COMFYUI_URL=http://localhost:8188/prompt
# A1111_URL=http://localhost:7860/sdapi/v1/txt2img

# ============================================
# VOICE / AUDIO (Optional)
# ============================================

# Speech-to-text uses whisper.cpp locally, or OpenAI Whisper if OPENAI_API_KEY is set
# WHISPER_CPP_BIN=/path/to/whisper

# Text-to-speech uses Piper locally, or OpenAI TTS if OPENAI_API_KEY is set
# PIPER_BIN=/path/to/piper
# PIPER_VOICE=en_US-lessac-medium

# ============================================
# WEB SEARCH (Optional)
# ============================================

# Web search uses DuckDuckGo HTML by default (no API key needed)
# For better results, run SearxNG locally:
# SEARXNG_URL=http://localhost:8080

# ============================================
# FEDERATION (Optional)
# ============================================

# Enable federation for multi-instance sync via Redis pub/sub
FEDERATION_ENABLED=false

# Redis connection for federation
# REDIS_URL=redis://localhost:6379

# Federation channel name
# FEDERATION_CHANNEL=lattice_broadcast

# Unique node identifier for this instance
# NODE_ID=node-1

# ============================================
# ECONOMIC ENGINE / STRIPE
# ============================================

# Stripe API keys (from https://dashboard.stripe.com/apikeys)
# Use test keys for development, live keys for production
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Stripe webhook secret (from Stripe dashboard webhooks section)
# Create webhook endpoint: https://yourdomain.com/api/economic/webhook
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe Price IDs for subscriptions
# Create these products in Stripe dashboard:
# - Pro: $12/month recurring
# - Teams: $29/seat/month recurring
STRIPE_PRICE_PRO=price_your_pro_price_id
STRIPE_PRICE_TEAMS=price_your_teams_price_id

# Frontend URL for Stripe redirects
FRONTEND_URL=https://yourdomain.com

# ============================================
# DEVELOPMENT ONLY
# ============================================

# Debug mode (never enable in production)
# DEBUG=true

# Disable authentication (never in production)
# DISABLE_AUTH=true
